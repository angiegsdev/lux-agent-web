<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LUX ‚Äì Voz</title>

  <!-- Azure Speech SDK -->
  <script src="https://aka.ms/csspeech/jsbrowserpackageraw"></script>

  <style>
    :root{
      --bg1:#050c1a;
      --bg2:#102640;
      --panel:#0b1c2d;
      --panel2:#0a1a2f;
      --cyan:#00e5ff;
      --cyan2:#00b7ff;
      --violet:#6b5cff;
      --text:#ffffff;
      --muted:rgba(255,255,255,.78);
      --muted2:rgba(255,255,255,.6);
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --radius: 18px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:"Segoe UI", Arial, sans-serif;
      color:var(--text);
      min-height:100vh;
      background: radial-gradient(900px 420px at 50% -40px, rgba(0,229,255,.25), transparent 60%),
                  linear-gradient(135deg, var(--bg1), var(--bg2));
      display:flex;
      flex-direction:column;
      align-items:center;
      padding-bottom:60px;
    }

    /* HEADER (misma l√≠nea futurista que tu home) */
    header{
      width:100%;
      padding: 14px 26px 18px 26px;
      display:flex;
      align-items:center;
      position:relative;
    }
    header::after{
      content:"";
      position:absolute;
      left:0; right:0; bottom:0;
      height:2px;
      background: linear-gradient(90deg, var(--cyan), var(--violet), var(--cyan));
      box-shadow: 0 0 14px rgba(0,229,255,.7);
      opacity:.9;
    }

    .logo-left, .logo-right{
      height:40px;
      width:auto;
      user-select:none;
    }
    .logo-left{ position:absolute; left:26px; }
    .logo-right{ position:absolute; right:26px; }

    .header-title-container{
      width:100%;
      text-align:center;
      padding: 0 120px; /* deja espacio para logos */
    }
    .header-title{
      margin:0;
      font-size:20px;
      font-weight:800;
      letter-spacing:.2px;
    }
    .header-subtitle{
      display:block;
      margin-top:2px;
      font-size:13px;
      opacity:.8;
    }

    /* CONTENIDO */
    .wrap{
      width:100%;
      max-width:980px;
      padding: 26px 18px 0 18px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 18px;
      align-items:start;
    }

    .card{
      background: linear-gradient(180deg, rgba(11,28,45,.92), rgba(10,26,47,.88));
      border: 1px solid rgba(0,229,255,.12);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .card::before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(600px 240px at 30% 0%, rgba(0,229,255,.18), transparent 55%),
                  radial-gradient(520px 220px at 90% 20%, rgba(107,92,255,.12), transparent 55%);
      pointer-events:none;
    }

    .card-body{
      position:relative;
      padding: 22px 22px 18px 22px;
    }

    .hero{
      display:flex;
      align-items:center;
      gap:14px;
      margin-bottom:12px;
    }

    .lux-badge{
      width:52px;
      height:52px;
      border-radius: 14px;
      background: rgba(0,183,255,.14);
      border: 1px solid rgba(0,229,255,.25);
      box-shadow: 0 0 18px rgba(0,183,255,.18);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:22px;
    }

    .hero h2{
      margin:0;
      font-size:22px;
      font-weight:800;
    }
    .hero p{
      margin:2px 0 0 0;
      color:var(--muted);
      font-size:14px;
      line-height:1.45;
    }

    .controls{
      margin-top: 16px;
      display:flex;
      gap:12px;
      align-items:center;
      flex-wrap:wrap;
    }

    .btn{
      background: var(--cyan2);
      padding: 14px 18px;
      font-size: 16px;
      font-weight: 800;
      border-radius: 12px;
      border:none;
      cursor:pointer;
      color:#08192b;
      display:flex;
      align-items:center;
      gap:10px;
      transition: .18s ease-in-out;
      box-shadow: 0 10px 24px rgba(0,183,255,.18);
    }
    .btn:hover{
      background:#32cbff;
      box-shadow: 0 0 22px rgba(0,183,255,.38);
      transform: translateY(-1px);
    }
    .btn:disabled{
      opacity:.55;
      cursor:not-allowed;
      transform:none;
      box-shadow:none;
    }

    .btn-secondary{
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.9);
      font-weight:700;
      padding: 12px 14px;
      border-radius: 12px;
      cursor:pointer;
      transition:.18s;
    }
    .btn-secondary:hover{
      background: rgba(255,255,255,.09);
    }

    .status-line{
      margin-top: 14px;
      display:flex;
      align-items:center;
      gap:10px;
      color: var(--muted);
      font-size: 14px;
    }

    .dot{
      width:10px; height:10px;
      border-radius: 50%;
      background: rgba(255,255,255,.25);
      box-shadow:none;
      transition:.2s;
    }
    .dot.listening{
      background: var(--cyan);
      box-shadow: 0 0 14px rgba(0,229,255,.9);
      animation: pulse 1.1s infinite;
    }
    @keyframes pulse{
      0%{ transform:scale(1); opacity:1; }
      50%{ transform:scale(1.25); opacity:.7; }
      100%{ transform:scale(1); opacity:1; }
    }

    .console{
      margin-top: 14px;
      padding: 14px 14px;
      background: rgba(0,0,0,.18);
      border: 1px solid rgba(0,229,255,.12);
      border-radius: 14px;
    }

    .console .label{
      font-size:12px;
      color: var(--muted2);
      letter-spacing:.6px;
      text-transform: uppercase;
      margin-bottom: 8px;
    }

    #recognizedText{
      font-size:18px;
      color: var(--cyan);
      line-height:1.55;
      min-height: 46px;
      white-space: pre-wrap;
    }

    .answer{
      margin-top: 12px;
      padding: 14px 14px;
      border-radius: 14px;
      background: rgba(0,183,255,.08);
      border: 1px solid rgba(0,183,255,.18);
    }
    .answer .label{
      font-size:12px;
      color: var(--muted2);
      letter-spacing:.6px;
      text-transform: uppercase;
      margin-bottom: 8px;
    }
    #luxAnswer{
      font-size: 15px;
      line-height: 1.6;
      color: rgba(255,255,255,.92);
      min-height: 42px;
      white-space: pre-wrap;
    }

    /* PANEL DERECHO */
    .side{
      display:flex;
      flex-direction:column;
      gap: 18px;
    }
    .side .mini{
      padding: 18px;
    }

    .hint-title{
      margin:0 0 10px 0;
      font-size: 14px;
      letter-spacing:.4px;
      text-transform: uppercase;
      color: rgba(255,255,255,.85);
    }

    .chips{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
    }
    .chip{
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.85);
      font-size: 13px;
    }

    .footer-note{
      margin-top: 10px;
      font-size: 12px;
      color: rgba(255,255,255,.6);
      line-height:1.5;
    }

    @media (max-width: 900px){
      .wrap{ grid-template-columns: 1fr; }
      .header-title-container{ padding: 0 90px; }
    }
    @media (max-width: 600px){
      .logo-left, .logo-right{ height:34px; }
      .header-title{ font-size:18px; }
      .header-title-container{ padding: 0 72px; }
      .btn{ width:100%; justify-content:center; }
      .btn-secondary{ width:100%; }
    }
  </style>
</head>

<body>

  <header>
    <!-- izquierda: logo LUX (si tu logolux est√° en ra√≠z, usa ../logolux.png) -->
    <img class="logo-left" src="../logolux.png" alt="Logo LUX">

    <div class="header-title-container">
      <h1 class="header-title">LUX ‚Äì Interacci√≥n por Voz</h1>
      <span class="header-subtitle">Direcci√≥n de Tecnolog√≠a ‚Ä¢ Ministerio de Hacienda y Cr√©dito P√∫blico</span>
    </div>

    <!-- derecha: logo Hacienda -->
    <img class="logo-right" src="../logohacienda.png" alt="Logo Ministerio de Hacienda">
  </header>

  <main class="wrap">

    <!-- CARD PRINCIPAL -->
    <section class="card">
      <div class="card-body">
        <div class="hero">
          <div class="lux-badge">üéôÔ∏è</div>
          <div>
            <h2>Habla y LUX responde</h2>
            <p>Presiona <b>Hablar</b>, pregunta lo que necesites y LUX te responde con voz.</p>
          </div>
        </div>

        <div class="controls">
          <button id="btnTalk" class="btn" onclick="startListening()">
            <span>üé§</span> <span id="btnText">Hablar</span>
          </button>
          <button class="btn-secondary" onclick="playIntro()">üéß Presentaci√≥n</button>
          <button class="btn-secondary" onclick="location.href='../index.html'">‚¨Ö Volver</button>
        </div>

        <div class="status-line">
          <span id="dot" class="dot"></span>
          <span id="status">Listo. Presiona ‚ÄúHablar‚Äù para comenzar.</span>
        </div>

        <div class="console">
          <div class="label">Texto reconocido</div>
          <div id="recognizedText"></div>
        </div>

        <div class="answer">
          <div class="label">Respuesta de LUX</div>
          <div id="luxAnswer"></div>
        </div>

        <div class="footer-note">
          Tip: habla claro y en frases cortas. Ej.: ‚ÄúLUX, ¬øqu√© eres?‚Äù o ‚Äú¬øQui√©n es el ministro?‚Äù.
        </div>
      </div>
    </section>

    <!-- PANEL LATERAL: ejemplos -->
    <aside class="side">
      <section class="card">
        <div class="card-body mini">
          <p class="hint-title">Preguntas sugeridas</p>
          <div class="chips">
            <span class="chip">LUX, ¬øqu√© eres?</span>
            <span class="chip">¬øQu√© hace la Direcci√≥n de Tecnolog√≠a?</span>
            <span class="chip">¬øQu√© es el Ministerio de Hacienda?</span>
            <span class="chip">¬øQui√©n es el director de tecnolog√≠a?</span>
            <span class="chip">¬øQu√© es la SART?</span>
            <span class="chip">¬øQu√© es la SIS?</span>
            <span class="chip">¬øCu√°l es el horario de atenci√≥n?</span>
          </div>
          <div class="footer-note">
            Esto te ayuda en demo: se ve guiado, profesional y ‚Äúpresentable‚Äù.
          </div>
        </div>
      </section>

      <section class="card">
        <div class="card-body mini">
          <p class="hint-title">Estado del micr√≥fono</p>
          <div class="footer-note" style="margin-top:0;">
            Si no te escucha: revisa permisos del navegador (micr√≥fono) y vuelve a recargar la p√°gina.
          </div>
        </div>
      </section>
    </aside>

  </main>

  <script>
    // ‚ö†Ô∏è CONFIGURA AQU√ç TU AZURE SPEECH
    const SPEECH_KEY = "TU_KEY_AQUI";
    const SPEECH_REGION = "eastus";

    // UI helpers
    function setListeningUI(isListening){
      const dot = document.getElementById("dot");
      const btn = document.getElementById("btnTalk");
      const btnText = document.getElementById("btnText");
      if(isListening){
        dot.classList.add("listening");
        btn.disabled = true;
        btnText.textContent = "Escuchando‚Ä¶";
      } else {
        dot.classList.remove("listening");
        btn.disabled = false;
        btnText.textContent = "Hablar";
      }
    }

    // Presentaci√≥n (demo del criterio ‚Äúsaluda y se presenta‚Äù)
    function playIntro(){
      const msg = "Hola, soy LUX, el asistente virtual de la Direcci√≥n de Tecnolog√≠a del Ministerio de Hacienda y Cr√©dito P√∫blico. ¬øEn qu√© te puedo ayudar?";
      document.getElementById("status").innerText = "Reproduciendo presentaci√≥n‚Ä¶";
      document.getElementById("luxAnswer").innerText = msg;
      speakText(msg);
    }

    function startListening() {
      document.getElementById("status").innerText = "Escuchando‚Ä¶";
      document.getElementById("recognizedText").innerText = "";
      document.getElementById("luxAnswer").innerText = "";
      setListeningUI(true);

      const speechConfig = SpeechSDK.SpeechConfig.fromSubscription(SPEECH_KEY, SPEECH_REGION);
      speechConfig.speechRecognitionLanguage = "es-CO";

      const audioConfig = SpeechSDK.AudioConfig.fromDefaultMicrophoneInput();
      const recognizer = new SpeechSDK.SpeechRecognizer(speechConfig, audioConfig);

      recognizer.recognizeOnceAsync(result => {
        setListeningUI(false);

        if (result.reason === SpeechSDK.ResultReason.RecognizedSpeech) {
          document.getElementById("status").innerText = "Listo. Procesando respuesta‚Ä¶";
          document.getElementById("recognizedText").innerText = result.text;

          const luxResponse = getLuxResponse(result.text);
          document.getElementById("luxAnswer").innerText = luxResponse;

          speakText(luxResponse);
          document.getElementById("status").innerText = "Respuesta generada. Puedes volver a hablar.";
        } else {
          document.getElementById("status").innerText = "No pude entender. Intenta de nuevo.";
          const fallback = "Lo siento, no pude entenderte. ¬øPodr√≠as repetir?";
          document.getElementById("luxAnswer").innerText = fallback;
          speakText(fallback);
        }

        recognizer.close();
      });
    }

    // üîä TEXT TO SPEECH
    function speakText(text) {
      const speechConfig = SpeechSDK.SpeechConfig.fromSubscription(SPEECH_KEY, SPEECH_REGION);
      speechConfig.speechSynthesisVoiceName = "es-CO-SalomeNeural";

      const synthesizer = new SpeechSDK.SpeechSynthesizer(speechConfig);
      synthesizer.speakTextAsync(
        text,
        () => synthesizer.close(),
        err => { console.error(err); synthesizer.close(); }
      );
    }

    // üß† INTELIGENCIA B√ÅSICA DE LUX (tu l√≥gica, intacta)
    function getLuxResponse(userText) {
      const text = userText.toLowerCase();

      // Saludo inicial
      if (text.includes("hola") || text.includes("buenos d√≠as") || text.includes("buenas")) {
        return "Hola, soy LUX, el agente virtual de la Direcci√≥n de Tecnolog√≠a del Ministerio de Hacienda. ¬øEn qu√© te puedo ayudar?";
      }

      // ¬øQui√©n eres?
      if (text.includes("qui√©n eres") || text.includes("qu√© eres") || text.includes("que eres") || text.includes("quien eres")) {
        return "Soy LUX, el agente virtual de primer contacto de la Direcci√≥n de Tecnolog√≠a del Ministerio de Hacienda y Cr√©dito P√∫blico.";
      }

      // ¬øQu√© hace la Direcci√≥n de Tecnolog√≠a?
      if (text.includes("direcci√≥n de tecnolog√≠a") || text.includes("direccion de tecnologia") || text.includes("qu√© hace la direcci√≥n") || text.includes("que hace la direccion")) {
        return "La Direcci√≥n de Tecnolog√≠a administra la infraestructura tecnol√≥gica, impulsa la innovaci√≥n, fortalece la seguridad de la informaci√≥n y garantiza la continuidad de los servicios tecnol√≥gicos del Ministerio.";
      }

      // SART ‚Äì Recursos Tecnol√≥gicos
      if (
        text.includes("sart") ||
        text.includes("sar") ||
        text.includes("recursos tecnologicos") ||
        text.includes("recursos tecnol√≥gicos") ||
        text.includes("administracion de recursos tecnologicos") ||
        text.includes("subdireccion de recursos") ||
        text.includes("subdirecci√≥n de recursos")
      ) {
        return "La SART es la Subdirecci√≥n de Administraci√≥n de Recursos Tecnol√≥gicos, encargada de la infraestructura, plataformas, comunicaciones y servicios tecnol√≥gicos del Ministerio.";
      }

      // SIS ‚Äì Subdirecci√≥n de Ingenier√≠a de Software
      if (
        text.includes("sis") ||
        text.includes("ingenieria de software") ||
        text.includes("ingenier√≠a de software") ||
        text.includes("subdireccion de ingenieria de software") ||
        text.includes("subdirecci√≥n de ingenier√≠a de software")
      ) {
        return "La SIS es la Subdirecci√≥n de Ingenier√≠a de Software, responsable del desarrollo, soporte y evoluci√≥n de los sistemas institucionales del Ministerio.";
      }

      // Director de Tecnolog√≠a
      if (
        text.includes("director") ||
        text.includes("director de tecnologia") ||
        text.includes("director de tecnolog√≠a")
      ) {
        return "El Director de Tecnolog√≠a es Diego Fernando Huertas Ortiz.";
      }

      // Subdirector de Ingenier√≠a de Software
      if (
        text.includes("subdirector de ingenieria de software") ||
        text.includes("subdirector de ingenier√≠a de software") ||
        text.includes("subdirector sis") ||
        text.includes("julio")
      ) {
        return "El Subdirector de Ingenier√≠a de Software es Julio Roberto.";
      }

      // Subdirectora SART
      if (
        text.includes("subdirectora de recursos") ||
        text.includes("subdirectora sart") ||
        text.includes("subdirectora sar")
      ) {
        return "La Subdirectora de Administraci√≥n de Recursos Tecnol√≥gicos es Clara Liliana.";
      }

      // Ministro de Hacienda
      if (text.includes("ministro") || text.includes("ministro de hacienda")) {
        return "El Ministro de Hacienda y Cr√©dito P√∫blico en Colombia es Germ√°n √Åvila Plazas.";
      }

      // ¬øQu√© es el Ministerio de Hacienda?
      if (
        text.includes("que es el ministerio") ||
        text.includes("qu√© es el ministerio de hacienda") ||
        text.includes("que hace el ministerio de hacienda") ||
        text.includes("qu√© hace el ministerio de hacienda")
      ) {
        return "El Ministerio de Hacienda y Cr√©dito P√∫blico es la entidad encargada de la pol√≠tica fiscal, el presupuesto nacional, el manejo de las finanzas p√∫blicas y la sostenibilidad econ√≥mica del pa√≠s.";
      }

      // Horario
      if (text.includes("horario") || text.includes("atenci√≥n") || text.includes("atencion")) {
        return "El horario de atenci√≥n es de lunes a viernes, de ocho de la ma√±ana a cinco de la tarde.";
      }

      // Despedida
      if (text.includes("gracias") || text.includes("adi√≥s") || text.includes("adios") || text.includes("hasta luego")) {
        return "Con gusto. Fue un placer ayudarte. Hasta luego.";
      }

      return "Entiendo tu solicitud. En este momento puedo ayudarte con informaci√≥n sobre la Direcci√≥n de Tecnolog√≠a, sus funciones y horarios.";
    }

    // Mensaje inicial para que la pantalla no quede ‚Äúmuerta‚Äù
    window.addEventListener("load", () => {
      document.getElementById("recognizedText").innerText = "‚Äî";
      document.getElementById("luxAnswer").innerText = "Hola, soy LUX. Presiona ‚ÄúHablar‚Äù y preg√∫ntame lo que necesites.";
    });
  </script>

</body>
</html>

